define("modules/clean/flux/flux_store",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(e){this._listeners=[],this._dispatcher=e,this._dispatchToken=this._dispatcher.register(this.__invokeOnDispatch.bind(this)),this.__hasChanged=!1}return e.prototype.teardown=function(){this._dispatcher.unregister(this._dispatchToken)},e.prototype.getDispatcher=function(){return this._dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.addListener=function(e){var t=this;return this._listeners.push(e),function(){return t._listeners=Array.from(t._listeners).filter(function(t){return t!==e})}},e.prototype.hasChanged=function(){return this.__hasChanged},e.prototype.__emitChange=function(){this.__hasChanged=!0},e.prototype.__invokeOnDispatch=function(e){if(this.__hasChanged=!1,this.__onDispatch(e),this.__hasChanged)return Array.from(this._listeners).map(function(e){return e()})},e})();t.FluxStore=r}),define("modules/clean/photos/thumb_loading/generic_thumb_store",["require","exports","modules/clean/photos/thumb_loading/http2_thumb_loader","modules/core/exception"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e,t){this.loaderBatches=!1,this.thumbUrlToData={},this.callbackByRequestId={},this.loaderBatches=!!t,this.thumbLoader=e?e:new r.Http2ThumbLoader}return e.prototype.is_batching=function(){return this.loaderBatches},e.prototype.bind_url=function(e,t){var r=this;if(n.assert(!!t.onSuccess,"missing onSuccess handler"),this.thumbUrlToData[e])return t.onRequest&&t.onRequest(!0),t.onSuccess(!0),null;var a=this.thumbLoader.get_request_id();this.callbackByRequestId[a]=t;var o=function(){var e=r.callbackByRequestId[a];e&&e.onRequest&&e.onRequest(!1)},i=function(t){r.thumbUrlToData[e]=t;var n=r.callbackByRequestId[a];n&&n.onSuccess(!1)},s=function(){var e=r.callbackByRequestId[a];e&&e.onError&&e.onError()},l=function(){return r.callbackByRequestId.hasOwnProperty(a)};return this.thumbLoader.load_image(e,a,o,i,s,l),a},e.prototype.unbind_url=function(e){e&&(delete this.callbackByRequestId[e],this.thumbLoader.cancel_thumb(e))},e.prototype.get_thumb=function(e){return this.thumbUrlToData[e]?this.thumbUrlToData[e]:null},e})();t.GenericThumbStore=a}),define("modules/clean/photos/thumb_loading/http2_thumb_loader",["require","exports","modules/clean/photos/thumb_loading/utils"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(){this.http2RequestId=0}return e.prototype.get_request_id=function(){return this.http2RequestId+=1,this.http2RequestId.toString()},e.prototype.load_image=function(e,t,n,a,o,i){n(),r.load_individual_image(e,1,a,o,i)},e.prototype.cancel_thumb=function(e){},e})();t.Http2ThumbLoader=n}),define("modules/clean/photos/thumb_loading/utils",["require","exports"],function(e,t){"use strict";function r(e,t,r,n,a){var o=new Image;o.onload=function(){return r(e)},o.onerror=function(){t>0&&a()?(t-=1,o.src=e):n()},o.src=e}Object.defineProperty(t,"__esModule",{value:!0}),t.load_individual_image=r}),define("modules/clean/react/app_actions_view",["require","exports","tslib","external/classnames","spectrum/button","spectrum/icon_action","spectrum/popover","spectrum/overflow_button","spectrum/tertiary_link","react","modules/core/exception","modules/clean/react/css","modules/clean/user_education/react/user_education_effect","modules/clean/user_education/user_education_client","modules/clean/react/file_uploader/upload_button","modules/clean/react/badge","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],function(e,t,r,n,a,o,i,s,l,u,c,d,p,m,h,f,_,y){"use strict";function b(e){return!("function"==typeof e)}var v=this;Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),u=r.__importDefault(u);var g=function(e){e.handleClick&&e.handleClick()};t.AppActionsPopover=function(e){var t=e.primaryMenuItems,r=e.secondaryMenuItems,n=e.popoverTriggerLabel,a=[];if(t)for(var l=0,c=t;l<c.length;l++){var d=c[l];b(d)&&(a=d.subItems?a.concat(d.subItems):a.concat([d]))}return r&&(a=a.concat.apply(a,r.filter(function(e){return!("function"==typeof e)}))),a.length&&n?u.default.createElement(i.Popover,{onSelection:g},u.default.createElement(i.PopoverTrigger,null,u.default.createElement(p.UserEducationEffect,{containerName:"AppActionsPopover",name:"OverflowButton",useSpan:!0},u.default.createElement(s.OverflowButton,{tagName:"span","aria-label":n}))),u.default.createElement(i.PopoverContent,{attachment:"right"},a.map(function(e){return e=e,u.default.createElement(i.PopoverContentItem,{key:e.displayName,value:e,className:e.className,disabled:e.disabled},e.iconName&&u.default.createElement(o.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.displayName)}))):u.default.createElement("noscript",null)};var E=function(e,t,r){m.UEClient.sendEvent(e,t),r&&r()},S=function(e){var t,r=e.primaryMenuItem,s=e.buttonVariant;if(b(r)){if(Object.keys(r).length>0){var l=n.default("primary-action-menu__button",r.className),c=l.indexOf("action-upload")>=0,d=!!r.subItems,m=u.default.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"PrimaryButtonText",useSpan:!0},r.displayName),f=c?u.default.createElement(h.UploadButton,{className:l,disabled:r.disabled,handleClick:function(){E("AppActionsView","PrimaryButtonTextClicked",r.handleClick)},variant:s,tagName:d?"span":void 0},m):u.default.createElement(a.Button,{className:l,disabled:r.disabled,onClick:r.handleClick,variant:s,tagName:d?"span":void 0},m),_=d?u.default.createElement(i.Popover,{onSelection:g},u.default.createElement(i.PopoverTrigger,{disabled:r.disabled},f),u.default.createElement(i.PopoverContent,{className:"primary-action-menu__popover-menu"},r.subItems.map(function(e){return u.default.createElement(i.PopoverContentItem,{key:e.popoverMenuName,value:e,className:e.className,disabled:e.disabled},e.iconName&&u.default.createElement(o.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.popoverMenuName)}))):f;t=_}}else t=r();return u.default.createElement("div",{className:"primary-action-menu__button-wrapper"},t)},C=function(e){var t=e.primaryMenuItems,r=e.headerText,n=e.hideHeaderText,a=n?null:u.default.createElement("span",{className:"primary-action-menu__header-text"},r);return t&&t.length>0?u.default.createElement("div",{className:"primary-action-menu"},a,t.map(function(e,t){var r=0===t?"primary":"secondary";return u.default.createElement(S,{primaryMenuItem:e,buttonVariant:r,key:t})})):u.default.createElement("noscript",null)},w=function(e){var a=e.menuItem,o=a.disabled,i=a.displayName,s=a.handleClick,c=a.iconName,d=a.badge,m=a.displayTip,_=a.ariaLabel,y=a.ariaPressed,b=n.default("secondary-action-menu__button",e.menuItem.className),v=b.indexOf("action-upload")>=0,g=u.default.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"SecondaryActionMenu-text-"+c},i,d&&u.default.createElement(f.Badge,r.__assign({},d)));if(v)return u.default.createElement(h.UploadButton,{key:e.key,iconName:c,handleClick:function(){E("AppActionsView","SecondaryActionMenu-text-"+c+"-Clicked",s)},disabled:o,className:b,variant:"secondary"},g);var S=u.default.createElement(l.TertiaryLink,{key:e.key,icon:c,onClick:function(){E("AppActionsView","SecondaryActionMenu-text-"+c+"-Clicked",s)},disabled:o,className:b,"aria-label":_,"aria-pressed":y},g);return m?u.default.createElement("div",null,u.default.createElement(t.AsyncCoachMark,{user:e.user},u.default.createElement("h4",null,m.title),u.default.createElement("div",null,m.content)),S):S};t.AsyncCoachMark=_.Loadable({loader:function(){return r.__awaiter(v,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return[4,y.waitForTTI()];case 1:return n.sent(),[4,new Promise(function(t,r){e(["modules/clean/react/delorean/components/coachmark"],t,r)}).then(r.__importStar)];case 2:return t=n.sent().CoachMark,[2,t]}})})}});var T=function(e){var t=e.secondaryMenuItems,r=e.user;return u.default.createElement(l.TertiaryList,{className:"secondary-action-menu"},t.map(function(e){return"function"==typeof e?e():u.default.createElement(w,{user:r,key:e.key||e.displayName,menuItem:e})}))},k=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(n,e),n.prototype.componentDidMount=function(){this.props.handleComponentTTI("AppActionsView")},n.prototype.render=function(){var e=this.props,r=e.responsive,n=e.primaryMenuItems,a=e.primarySubnode,o=e.secondaryMenuItems,i=e.headerText,s=e.hideHeaderText,l=e.popoverTriggerLabel,d=e.user,p=!(!r||!r.isResponsive||r.isMatchedLarge);return n&&n.forEach(function(e){b(e)&&e.subItems&&c.assert(e.subItems.length>0,"Primary menu item cannot have empty list of subItems")}),u.default.createElement("div",{className:"appactions-menu"},p&&u.default.createElement("div",{className:"appactions-menu--popover"},n&&l&&u.default.createElement(t.AppActionsPopover,{primaryMenuItems:n,secondaryMenuItems:o,popoverTriggerLabel:l})),!p&&u.default.createElement("div",{className:"appactions-menu--buttons"},n&&u.default.createElement(C,{primaryMenuItems:n,headerText:i,hideHeaderText:s}),a,o&&u.default.createElement(T,{user:d,secondaryMenuItems:o})))},n.defaultProps={headerText:"",secondaryMenuItems:[],handleComponentTTI:function(){}},n})(u.default.PureComponent),M=d.requireCssWithComponent(k,["/static/css/spectrum/index.web-vflI9cXf0.css","/static/css/dropbox/app_actions-vflvECjbj.css"]);t.AppActionsView=M}),define("modules/clean/react/file_uploader/file_uploader",["require","exports","tslib","react","modules/core/exception"],function(e,t,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n);var o=null,i=(function(t){function i(e){var r=t.call(this,e)||this;return r.handleAllFileUploadsComplete=function(e){e.find(function(e){return!!r.state.uploadErrorTypes&&e.errorType===r.state.uploadErrorTypes.OVER_QUOTA_ERROR})&&!r.isPaidTeamViewer()&&i.showModal("out-of-quota"),r.props.onAllFileUploadsComplete&&r.props.onAllFileUploadsComplete(e)},r.path=r.props.initialPath?r.props.initialPath:"/",r.hasPermissionToUploadToFolder=!!r.props.initialPermission,r.state={fileUploader:void 0,uploaderStore:void 0,uploaderActions:void 0,viewer:void 0,uploadErrorTypes:void 0},r.props.loadOnRender&&i.requireFileUploader({}),o?a.reportStack("Only one FileUploader component may be rendered to the page at any time.You have tried to instantiate multiple uploaders.",{severity:a.SEVERITY.CRITICAL}):o=r,r}return r.__extends(i,t),i.requireFileUploader=function(t){var n=t.modalType,a=t.handleUploadButtonClick,s=t.folderUpload,l=function(e){var t=e[0].FileUploader,r=e[1].uploaderStore,l=e[2].UploaderActions,u=e[3].Viewer,c=e[4].UploadErrorType;o&&(o.setAsyncRequiredUploaderModules(t,l,r,u,c),n&&i.showModal(n),a&&i.handleUploadButtonClick(!!s))};l.perfName="file_uploader",Promise.all([new Promise(function(t,r){e(["modules/clean/react/file_uploader/uploader_new"],t,r)}).then(r.__importStar),new Promise(function(t,r){e(["modules/clean/react/file_uploader/store"],t,r)}).then(r.__importStar),new Promise(function(t,r){e(["modules/clean/react/file_uploader/actions"],t,r)}).then(r.__importStar),new Promise(function(t,r){e(["modules/clean/viewer"],t,r)}).then(r.__importStar),new Promise(function(t,r){e(["modules/clean/react/file_uploader/constants"],t,r)}).then(r.__importStar)]).then(l)},i.prototype.setAsyncRequiredUploaderModules=function(e,t,r,n,a){this.setState({fileUploader:e,uploaderStore:r,uploaderActions:t,viewer:n,uploadErrorTypes:a}),this.props.needToSetStoreValues&&(void 0!==this.user&&t.setUser({user:this.user}),t.setPath({path:this.path,hasPermissionToUploadToFolder:this.hasPermissionToUploadToFolder}))},i.prototype.componentWillUnmount=function(){o=null},i.loadCoreComponent=function(){o&&o.state.fileUploader||i.requireFileUploader({})},i.isCoreComponentDefined=function(){return!!o&&!!o.state.fileUploader},i.setPathAndPermissions=function(e){o&&o.state.uploaderActions&&o.state.uploaderActions.setPath(e)},i.setPath=function(e){o&&(o.state.uploaderActions?o.state.uploaderActions.setPath({path:e}):(e||(e="/"),o.path=e))},i.setUser=function(e){o&&(o.state.uploaderActions?o.state.uploaderActions.setUser({user:e}):o.user=e?e:void 0)},i.showModal=function(e){o&&(o.refs.fileUploader?e&&"regular"!==e?"out-of-quota"===e?o.refs.fileUploader.showOOQModal():"team-onboarding"===e&&o.refs.fileUploader.showModalWithTeamOnboarding():o.refs.fileUploader.showModal():(e=e||"regular",i.requireFileUploader({modalType:e})))},i.handleUploadButtonClick=function(e,t){o&&(o.refs.fileUploader?o.refs.fileUploader.handleUploadButtonClick(e,t):i.requireFileUploader({handleUploadButtonClick:!0,folderUpload:e}))},i.isDraggingFilesHelper=function(e){if(!o)return!1;if(!o.state.uploaderStore)return!1;var t=o.state.uploaderStore;return!!t.numDraggingFiles()&&(e?t.isInternalTransfer():!t.isInternalTransfer())},i.isDraggingInternalFiles=function(){return i.isDraggingFilesHelper(!0)},i.isDraggingExternalFiles=function(){return i.isDraggingFilesHelper(!1)},i.isUploadModalOpen=function(){return!!o&&(!!o.state.uploaderStore&&o.state.uploaderStore.isUploadModalOpen())},i.prototype.isPaidTeamViewer=function(){return!(!this.user||!this.state.viewer||!this.user.is_team||this.state.viewer.get_viewer().team_is_limited)},i.prototype.render=function(){if(!this.state.fileUploader)return n.default.createElement("div",null);var e=this.props,t=e.browseViewType,r=e.isContentManager,a=e.ajaxInterceptor,o=e.onFileUploadComplete,i=e.onModalDismissed,s=e.dragAndDropEnabled,l=e.shouldShowDestinationLink,u=e.uploaderExperiments,c=e.uploaderPostTTIExperiments,d=e.chooseDestination,p=e.rootNSIDForCM,m=this.state.fileUploader;return n.default.createElement(m,{ref:"fileUploader",key:1,browseViewType:t,isContentManager:r,ajaxInterceptor:a,onFileUploadComplete:o,onAllFileUploadsComplete:this.handleAllFileUploadsComplete,onModalDismissed:i,dragAndDropEnabled:s,shouldShowDestinationLink:l,uploaderExperiments:u,uploaderPostTTIExperiments:c,chooseDestination:d,rootNSIDForCM:p})},i})(n.default.Component);t.FileUploaderController=i}),define("modules/clean/react/file_uploader/upload_button",["require","exports","tslib","spectrum/button","spectrum/tertiary_link","react"],function(e,t,r,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o);var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.renderPrimaryButton=function(){return o.default.createElement(n.Button,{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick,variant:"primary",tagName:this.props.tagName},this.props.children)},t.prototype.renderTertiaryLink=function(){return o.default.createElement(a.TertiaryLink,{icon:this.props.iconName,onClick:this.props.handleClick,disabled:this.props.disabled,className:this.props.className},this.props.children)},t.prototype.renderCMButton=function(){return o.default.createElement("button",{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick},this.props.children)},t.prototype.render=function(){return"primary"===this.props.variant?this.renderPrimaryButton():"CM"===this.props.variant?this.renderCMButton():this.renderTertiaryLink()},t})(o.default.PureComponent);t.UploadButton=i}),define("modules/clean/react/maestro/search",["require","exports","tslib","react","spectrum/media_table_skeleton","modules/clean/react/async/loadable","modules/clean/react/browse/models","modules/clean/react/maestro/layout"],function(e,t,r,n,a,o,i,s){"use strict";var l=this;Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.AsyncMaestroSearchSidebar=o.Loadable({loader:function(){return r.__awaiter(l,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return[4,new Promise(function(t,r){e(["modules/clean/search/single_page/sidebar"],t,r)}).then(r.__importStar)];case 1:return t=n.sent().SearchSidebar,[2,t]}})})}}),t.AsyncMaestroSearchView=o.Loadable({loader:function(){return r.__awaiter(l,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return[4,new Promise(function(t,r){e(["modules/clean/search/single_page/view"],t,r)}).then(r.__importStar)];case 1:return t=n.sent().SearchView,[2,t]}})})},loading:function(){return n.default.createElement(a.MediaTableSkeleton,{numRows:15})}});var u=(function(e){function a(r){var a=e.call(this,r)||this;return a.handleSearchExit=function(){a.setState({isSearching:!1})},a.handleSearchEnter=function(){a.setState({isSearching:!0})},a.renderSearchSidebar=function(e){var r=new i.BrowseContext;return n.default.createElement(t.AsyncMaestroSearchSidebar,{key:"search",user:a.props.user,responsive:e,context:r})},a.renderEmbeddedApp=function(e){return[a.inSearchMode?n.default.createElement(t.AsyncMaestroSearchView,{key:"search",user:a.props.user,responsive:e}):null,n.default.createElement("div",{style:{display:a.inSearchMode?"none":void 0},key:"app"},"function"==typeof a.props.embeddedAppRegion?a.props.embeddedAppRegion(e):a.props.embeddedAppRegion)]},a.state={isSearching:!1},a}return r.__extends(a,e),Object.defineProperty(a.prototype,"inSearchMode",{get:function(){return this.props.searchBarProps&&this.props.searchBarProps.expUniversalSinglePageSearch&&this.props.user&&this.state.isSearching},enumerable:!0,configurable:!0}),a.prototype.render=function(){return n.default.createElement(s.MaestroChrome,r.__assign({},this.props,{actionSidebarRegion:this.inSearchMode?this.renderSearchSidebar:this.props.actionSidebarRegion,searchBarProps:r.__assign({},this.props.searchBarProps||{},{isSearching:this.state.isSearching,onSearchExit:this.handleSearchExit,onSearchEnter:this.handleSearchEnter}),embeddedAppRegion:this.renderEmbeddedApp,titleClass:"page-header__title--search",chromeClass:this.inSearchMode?"maestro-chrome--search maestro-chrome--search-active":"maestro-chrome--search"}))},a})(n.default.PureComponent);t.SearchChrome=u});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/sharing/wizard/async_wizard_modals",["require","exports"],function(e,t){"use strict";function r(t){new Promise(function(t,r){e(["modules/clean/sharing/wizard/wizard_modals"],t,r)}).then(__importStar).then(t)}function n(e,t,n,a){r(function(r){r.shareExistingFolder(e,t,n,a)})}function a(e,t){r(function(r){var n=r.showShareAFolderWizardModal(e);t&&t(n)})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShareExistingFolder=n,t.asyncShowShareAFolderWizardModal=a});
//# sourceMappingURL=pkg-browse-core.min.js-vflJ8yZAa.map