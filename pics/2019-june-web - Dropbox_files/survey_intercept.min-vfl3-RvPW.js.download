define(["require","exports","tslib","react","modules/clean/react/css","modules/clean/react/modal","spectrum/button","spectrum/label","spectrum/radio_button","modules/clean/react/extensions/survey_thanks","modules/core/i18n","modules/clean/react/app_actions/apis"],function(e,t,a,n,s,r,i,o,l,u,c,d){"use strict";function m(e,t,s,i,o){return a.__awaiter(this,void 0,void 0,function(){var l;return a.__generator(this,function(a){switch(a.label){case 0:return[4,d.hasUserSeenSurveyForApp(e.id,s)];case 1:return a.sent()||(l=5e3,setTimeout(function(){r.Modal.showInstance(n.default.createElement(_,{user:e,appName:i,appIconUrl:o,telemetrySession:t})),d.markAppSurveyShown(e.id,s)},l)),[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importDefault(n);var f=(function(e){function t(t){var a=e.call(this,t)||this;return a.handleRatingChanged=function(e){a.setState({rating:e.currentTarget.value})},a.handleFeedbackChanged=function(e){a.setState({feedback:e.currentTarget.value})},a.handleClose=function(e){e.preventDefault(),r.Modal.close()},a.handleFormSubmit=function(e){e.preventDefault();var t=a.props,n=t.appName,s=t.telemetrySession,r=a.state,i=r.rating,o=r.feedback;s.event("submit_survey",{app_name:n,rating:i,feedback:o}),a.setState({showThankYouModal:!0})},a.state={rating:"",feedback:"",showThankYouModal:!1},a}return a.__extends(t,e),t.prototype.render=function(){var e=this;return this.state.showThankYouModal?n.default.createElement(u.SurveyThanks,null):n.default.createElement(r.Modal,{className:"uxa-modal extensions-survey",id:"extensions-survey",ariaLabel:"Extensions Survey",acceptButtonText:null,style:"clean",autoFocusPrimaryInput:!1},n.default.createElement("div",{className:"extensions-survey-header"},n.default.createElement("span",{className:"extensions-survey-header__title"},c._("How did things go with %(app_name)s?").format({app_name:this.props.appName})),n.default.createElement("img",{alt:"",className:"extensions-survey-header__icon",src:this.props.appIconUrl})),n.default.createElement("form",{className:"extensions-survey-form"},n.default.createElement("span",{className:"extensions-survey-form__ratings-title"},c._("How satisfied are you?")),n.default.createElement("div",{className:"extensions-survey-form__ratings"},[1,2,3,4,5].map(function(t){var a=e.state.rating===t.toString();return n.default.createElement("div",{className:"extensions-survey-form__rating",key:"app-rating-"+t},n.default.createElement(l.RadioButton,{"aria-checked":a,checked:a,id:"rating-"+t,onChange:e.handleRatingChanged,value:t,name:"extensions-rating",className:"extensions-survey-form__rating-button",labelClass:"extensions-survey-form__rating-option"},n.default.createElement("span",{className:"extensions-survey-form__rating-text"},t)),1===t?n.default.createElement("span",{className:"extensions-survey-form__rating-subtitle"},c._("Not satisfied")):5===t?n.default.createElement("span",{className:"extensions-survey-form__rating-subtitle extensions-survey-form__rating-subtitle--wide"},c._("Extremely satisfied")):null)})),n.default.createElement("div",{className:"extensions-survey-form__feedback"},n.default.createElement(o.Label,{htmlFor:"extensions-survey-form__feedback-input",className:"extensions-survey-form__feedback-title"},c._("What happened? Any suggestions?")),n.default.createElement("textarea",{id:"extensions-survey-form__feedback-input",className:"extensions-survey-form__feedback-input",onChange:this.handleFeedbackChanged,"aria-label":c._("Describe your experience"),placeholder:c._("Describe your experience"),rows:4})),n.default.createElement("div",{className:"extensions-survey-form__action-bar"},n.default.createElement(i.Button,{variant:"primary",className:"extensions-survey-form__submit-button",disabled:["1","2","3","4","5"].indexOf(this.state.rating)===-1,onClick:this.handleFormSubmit},c._("Send feedback")),n.default.createElement(i.Button,{variant:"secondary",className:"extensions-survey-form__cancel-button",onClick:this.handleClose},c._("Not now")))))},t})(n.default.Component),_=s.requireCssWithComponent(f,["/static/css/extensions/index-vflIhvFue.css"]);t.maybeShowSurveyIntercept=m});
//# sourceMappingURL=survey_intercept.min.js-vfl6FtxBu.map