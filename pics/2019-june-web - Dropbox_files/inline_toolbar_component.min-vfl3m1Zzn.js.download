define(["require","exports","tslib","react","spectrum_comments/comment_editor/core/editor_component","spectrum_comments/folder_overview_editor/utils","spectrum_comments/folder_overview_editor/components/toolbar_component"],function(t,e,o,n,i,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(function(t){function e(e){var o=t.call(this,e)||this;return o.setToolbarContainerRef=function(t){o.toolbarContainerRef=t},o.setToolbarComponentRef=function(t){o.toolbarComponentRef=t},o.state={position:null},o}return o.__extends(e,t),e.prototype.getPosition=function(){var t=this.props.scrollClassName,e=window.getSelection(),o=0!==e.rangeCount&&e.getRangeAt(0),n=o&&o.startContainer,i=n&&n.parentElement&&n.parentElement.getBoundingClientRect();if(!this.toolbarContainerRef||!i)return null;var s=r.getOffsetParent(this.toolbarContainerRef,t);if(!s)return null;var a=s.getBoundingClientRect();return{top:i.top-a.top}},e.prototype.getPositionOrCachedValue=function(){var t=this.getSelection();if(this.cachedPosition&&this.selectionForCachedPosition==t)return this.cachedPosition;var e=this.getPosition();return this.cachedPosition=e,this.selectionForCachedPosition=t,e},e.prototype.componentWillUpdate=function(){var t=this,e=this.status.draft.editorState.getSelection();this.status.inlineToolbar.props.isVisible&&this.state.selection!==e&&this.setState({selection:e,position:null},function(){setTimeout(function(){t.setState({position:t.getPositionOrCachedValue()})},0)})},e.prototype.getSelection=function(){return this.container.getStatus().draft.editorState.getSelection()},e.prototype.renderToolbar=function(t){var e=this.container.getStatus().draft.editorState,o=this.localization.folderOverviewToolbar||{},i=this.status.inlineToolbar.props.showOnlyMention;return n.createElement(s.ToolbarComponent,{position:t,setToolbarComponentRef:this.setToolbarComponentRef},!i&&this.props.toolbarButtonOnboarding&&n.createElement(s.ToolbarOnboardingButton,{localization:o,onClick:this.props.toolbarButtonOnboarding,triggers:{draft:this.triggers.draft}}),!i&&n.createElement(s.ToolbarUnorderedListButton,{localization:o,state:e,triggers:{draft:this.triggers.draft}}),!i&&n.createElement(s.ToolbarOrderedListButton,{state:e,localization:o,triggers:{draft:this.triggers.draft}}),!i&&this.props.isTaskFeatureEnabled?n.createElement(s.ToolbarTaskButton,{localization:o,triggers:{draft:this.triggers.draft,task:this.triggers.task}}):null,this.props.isMentionFeatureEnabled?n.createElement(s.ToolbarMentionButton,{localization:o,triggers:{draft:this.triggers.draft}}):null)},e.prototype.render=function(){var t=this.status.inlineToolbar.props.isVisible,e=this.state.position,o=t&&e?this.renderToolbar(e):null;return n.createElement("div",{className:"sc-inline-toolbar-container",ref:this.setToolbarContainerRef},o)},e})(i.EditorComponent);e.InlineToolbarComponent=a});
//# sourceMappingURL=inline_toolbar_component.min.js-vfl2Qkkbd.map