define(["require","exports","tslib","react","spectrum-collab-browse/last_edit","modules/clean/datetime","modules/clean/react/css","modules/clean/react/folder_overview/constants","modules/clean/react/folder_overview/data/types","modules/clean/react/folder_overview/utils"],function(e,t,s,i,o,r,a,n,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=s.__importDefault(i);var d=(function(e){function t(t){var s=e.call(this,t)||this;return s.stateFromProps=function(e){return void 0===e&&(e=s.props),{message:s.createMessage(e),conflictPopup:s.createConflictPopup(e)}},s.onTimeout=function(){s.setState(s.stateFromProps()),s.updateTimer=setTimeout(s.onTimeout,3e4)},s.createMessage=function(e){if(!e.lastModifiedTime)return"";var t=r.ago(1e3*e.lastModifiedTime,!1,!0,!1);return e.isFolderOverviewEmpty?e.lastModifiedUserId===e.user.account_id?n.DESCRIPTION_LAST_EDIT_EMPTY_YOU.format({time_ago:t}):e.lastModifiedUser?n.DESCRIPTION_LAST_EDIT_EMPTY.format({time_ago:t,name:e.lastModifiedUser.name.display_name}):"":e.lastModifiedUserId===e.user.account_id?n.DESCRIPTION_LAST_EDIT_YOU.format({time_ago:t}):e.lastModifiedUser?n.DESCRIPTION_LAST_EDIT.format({time_ago:t,name:e.lastModifiedUser.name.display_name}):""},s.createConflictPopup=function(e){if(e.descriptionSaveState===l.DescriptionSaveState.CONFLICT){if(e.lastModifiedUserId===e.user.account_id)return{title:n.CONFLICT_POPUP_TITLE_YOU,message:n.CONFLICT_POPUP_CONTENT_YOU,dismissButtonLabel:n.CONFLICT_POPUP_BUTTON,onDismissHandler:function(){e.onDismiss()},userInitials:u.userInitials(e.user),userPhotoUrl:e.user.photo_url};if(e.lastModifiedUser)return{title:n.CONFLICT_POPUP_TITLE.format({user:e.lastModifiedUser.name.display_name}),message:n.CONFLICT_POPUP_CONTENT,dismissButtonLabel:n.CONFLICT_POPUP_BUTTON,onDismissHandler:function(){e.onDismiss()},userInitials:u.userInitials(e.lastModifiedUser),userPhotoUrl:e.lastModifiedUser.profile_photo_url}}},s.state=s.stateFromProps(t),s}return s.__extends(t,e),t.prototype.componentDidMount=function(){this.updateTimer=setTimeout(this.onTimeout,3e4)},t.prototype.componentWillUnmount=function(){clearTimeout(this.updateTimer)},t.prototype.componentWillReceiveProps=function(e){this.setState(this.stateFromProps(e))},t.prototype.render=function(){return this.state.message?i.default.createElement(o.LastEditComponent,{lastEditMessage:this.state.message,conflictPopup:this.state.conflictPopup}):null},t})(i.default.PureComponent);t.FolderOverviewLastEditComponent=d,t.FolderOverviewLastEdit=a.requireCssWithComponent(d,["/static/js/spectrum-collab-browse/index.web-vflEz3sIq.css"])});
//# sourceMappingURL=last_edit.min.js-vfl6rKhDl.map