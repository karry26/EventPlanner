define(["require","exports","tslib","modules/core/i18n","modules/clean/ajax_as_promised","modules/clean/react/overquota_modal_controller","modules/clean/viewer","modules/clean/analytics"],function(e,r,o,t,a,u,n,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),u=o.__importStar(u),r.OverquotaHelper={getVariantSubgrowthProShmCtaCopy:function(){return new Promise(function(e,r){var o=n.Viewer.get_viewer().get_users()[0];return o||r("Error: no user found."),a.SilentBackgroundRequest({url:"/subgrowth_pro_shm_cta_copy",dataType:"json",data:{_subject_uid:o.id}}).then(function(r){e(r)}).catch(function(e){r(e)})})},maybeShowSubgrowthProOQRecurringModal:function(e){var r=n.Viewer.get_viewer().get_users()[0];r&&a.SilentBackgroundRequest({url:"/get_subgrowth_pro_oq_modal_recurring_variant",data:{_subject_uid:r.id}}).then(function(o){try{var n=JSON.parse(o).variant;n&&("V1"===n&&(u.showOverquota({oqa:e,tagline:t._("Youâ€™ll need more space to add new files or folders.")}),a.SilentBackgroundRequest({url:"/set_subgrowth_pro_oq_modal_timestamp",data:{_subject_uid:r.id}})),a.SilentBackgroundRequest({url:"/log/stormcrow_exposures",data:{stormcrow_name:"subgrowth_pro_oq_modal_recurring",variant:n}}))}catch(e){}})},maybeShowSubgrowthProOQFileRequestModal:function(e,r){return new Promise(function(o,i){var _=n.Viewer.get_viewer().get_users()[0];_?e?a.SilentBackgroundRequest({url:"/get_subgrowth_pro_oq_file_request_variant",data:{_subject_uid:_.id}}).then(function(e){var n=JSON.parse(e).variant,i="V1"===n;i&&(s.GrowthEventsLogger.log("oq_fr",{action:"view",button_text:"Get more space",destination_url:"http://www.dropbox.com/upgrade",location:"overlay",quota_status:"over",upsell_type:"modal"}),u.showOverquota({oqa:r,tagline:t._("Get more space so you can send file requests."),isRequestModal:!0})),a.SilentBackgroundRequest({url:"/log/stormcrow_exposures",data:{stormcrow_name:"subgrowth_pro_oq_file_request",variant:n}}),o(i)}):o(!1):i("Error: no user found.")})}}});
//# sourceMappingURL=overquota_helper.min.js-vflrsWcNv.map