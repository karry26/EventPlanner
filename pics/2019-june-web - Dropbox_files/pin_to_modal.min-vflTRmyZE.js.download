define(["require","exports","tslib","react","spectrum/modal","retrieval-components/folder-list","modules/clean/filepath","modules/clean/logging/hive/schemas/web-modal-activity","modules/clean/react/folder_overview/constants","modules/clean/react/modal","modules/clean/ux_analytics_modal_tracking","modules/clean/ux_analytics_utils","modules/clean/viewer","modules/clean/web_modal_activity_logger","modules/core/i18n"],function(e,t,o,l,a,n,r,i,s,d,c,u,m,h,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=o.__importDefault(l),r=o.__importStar(r),d=o.__importStar(d);var _=(function(e){function t(t){var o=e.call(this,t)||this;return o.makeFoldersFromProps=function(e){void 0===e&&(e=o.props);var t=r.normalize(e.path).split("/"),l=[],a="";return t.forEach(function(t){a=r.normalize(a+"/"+t),l.push({path:a,name:r.paths_are_equal("/",t)?r.filename("",m.Viewer.get_root_name(e.user)):t,icon:e.user.is_cdm_member&&r.paths_are_equal(a,e.user.cdm_tmf_path)?"folder_team_member-small":"folder-small",isClickable:!0,hasSubfolders:!1,subtitle:r.paths_are_equal(a,e.path)?p._("This folder"):void 0})}),l.reverse(),l},o.close=function(){o.setState({isOpen:!1}),u.dispatchModalClosed()},o.handleSuccess=function(){o.logger.log(i.ModalEventName.SUCCESS),o.props.onFolderSelected(o.state.selectedPath),o.close()},o.handleCancel=function(){o.close()},o.handleReady=function(){o.logger.log(i.ModalEventName.READY),u.dispatchModalOpened()},o.handleRequestClose=function(){o.logger.log(i.ModalEventName.CLOSE),o.close()},o.handlePrimaryButtonClick=function(e){o.logger.log(i.ModalEventName.PRIMARY_CLICK,{path:e})},o.handleSecondaryButtonClick=function(){o.logger.log(i.ModalEventName.SECONDARY_CLICK)},o.handleFolderSelected=function(e){o.setState({selectedPath:e})},o.handlePrimaryAction=function(){o.handlePrimaryButtonClick(),o.handleSuccess()},o.handleSecondaryAction=function(){o.handleSecondaryButtonClick(),o.handleCancel()},o.state={isOpen:!0,selectedPath:t.path,folders:o.makeFoldersFromProps(t)},o}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.logger=new h.WebModalActivityLogger(i.ModalName.FOLDER_OVERVIEW_PIN_TO),this.logger.log(i.ModalEventName.SHOW)},Object.defineProperty(t.prototype,"title",{get:function(){return 1===this.props.files.length?s.PIN_TO_MODAL_TITLE_SINGLE.format({name:r.filename(this.props.files[0].fq_path)}):s.PIN_TO_MODAL_TITLE_MULTIPLE.format({num:this.props.files.length})},enumerable:!0,configurable:!0}),t.prototype.render=function(){return l.default.createElement(a.UtilityModal,{className:"folder-overview__pin-to-modal",onReady:this.handleReady,primaryAction:p._("Pin"),secondaryAction:p._("Cancel"),onPrimaryAction:this.handlePrimaryAction,onSecondaryAction:this.handleSecondaryAction,title:this.title,ariaLabel:this.title,open:this.state.isOpen,onRequestClose:this.handleRequestClose,appElement:document.getElementById("embedded-app"),shouldRequestCloseOnActions:!1,bodyId:"folder-overview-pin-to-modal",shouldFocusAfterRender:!0},l.default.createElement(n.FolderList,{folders:this.state.folders,onFolderSelected:this.handleFolderSelected,selectedPath:this.state.selectedPath}),l.default.createElement(c.UXAnalyticsModalTracking,{id:"folder-overview-pin-to"}))},t.show=function(e){d.Modal.showInstance(l.default.createElement(t,o.__assign({},e)))},t})(l.default.PureComponent);t.FolderOverviewPinToModal=_});
//# sourceMappingURL=pin_to_modal.min.js-vflt-8VDo.map